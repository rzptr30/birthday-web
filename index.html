<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday, Adellia!ğŸ«¶ğŸ»ğŸ‚âœ¨</title>
  <meta name="description" content="Situs mini untuk merayakan ulang tahun kamu. Dibuat penuh cinta ğŸ’–" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- CSS eksternal -->
  <link rel="stylesheet" href="src/css/styles.css">

  <!-- Tambahan kecil agar canvas tidak menghalangi klik, dan gaya timer -->
  <style>
    #confetti, #hearts { pointer-events: none; }
    #lifeTimer { font-size:.9rem; margin-top:8px; color:#cbd5e1; font-family:monospace; }
  </style>
</head>
<body>
  <!-- efek -->
  <canvas id="confetti"></canvas>
  <canvas id="hearts"></canvas>

  <header>
    <div class="halo" aria-hidden="true"></div>
    <div class="hero" role="banner">
      <div class="badge">ğŸ‰ Ulang Tahun Ke- <span id="age">?</span> â€¢ <span id="dateLbl">â€”</span></div>
      <h1>Happy Birthday, <span class="love" id="name">Sayang</span>! ğŸ’–</h1>
      <p class="sub">Terima kasih sudah hadir dan mewarnai hariku. Ini hadiah kecil: satu halaman yang hanya untuk kamu. âœ¨</p>

      <!-- TIMER UMUR LIVE (tambahan) -->
      <div id="lifeTimer" aria-label="Timer hidup"></div>

      <div class="countdown" id="countdown" aria-label="Hitung mundur ke hari H"></div>

      <div class="cta">
        <button class="btn primary" id="btnPlay">â–¶ï¸ Putar Musik</button>
        <button class="btn" id="btnMemories" onclick="document.getElementById('gallery').scrollIntoView({behavior:'smooth'})">Lihat Kenangan ğŸ“·</button>
        <!-- Tombol shortcut ke photobooth (tambahan) -->
        <button class="btn" id="btnGotoBooth">Mulai Foto Booth ğŸ“¸</button>
        <button class="btn" id="btnConfetti">Semprot Konfeti ğŸŠ</button>
      </div>

      <div class="stats">
        <div class="chip">â¤ï¸ <span id="daysTogether">0</span> hari sejak kenal</div>
        <div class="chip">ğŸ’ <span id="daysDating">0</span> hari sejak jadian</div>
      </div>
    </div>
  </header>

  <main>
    <section class="section" id="about">
      <div class="card grid cols-2">
        <div>
          <h2>Surat Kecil Untukmu</h2>
          <p id="loveNote">Hari ini spesial, sama seperti dirimu. Semoga semua doa terbaik mengiringi langkahmu. Aku bangga sama kamuâ€”terus bersinar, ya! ğŸŒŸ</p>
          <p class="muted">Scroll terus yaâ€”ada galeri, alasan kenapa kamu spesial, Abadikan Momen, dan surat kecil untuk masa depan kita. ğŸ˜Š</p>
        </div>
        <div>
          <h2>Detail Hari-H</h2>
          <p><b>Tanggal:</b> <span id="dateText">â€”</span><br/>
             <b>Lokasi:</b> Cafe favorit / Rumah<br/>
             <b>Dress code:</b> Casual pastel</p>
        </div>
      </div>
    </section>

    <section class="section" id="gallery">
      <div class="card">
        <h2>Galeri Kenangan</h2>
        <p>Pilih 6â€“12 foto favorit kalian. Taruh di folder <code>assets/gallery</code>.</p>
        <div class="gallery" id="gal"></div>
      </div>
    </section>

    <section class="section" id="reasons">
      <div class="card">
        <h2>10 Hal yang Aku Suka dari Kamu ğŸ’—</h2>
        <div class="reasons" id="reasonsList"></div>
      </div>
    </section>

    <!-- ====== Abadikan Momen (4-up, overlay) ====== -->
    <section class="section" id="frame">
      <div class="card">
        <h2>Abadikan Momen Ini ğŸ“¸</h2>

        <!-- PILIHAN AWAL -->
        <div id="choiceRow" class="choices" style="margin-top:10px">
          <button class="btn primary" id="btnCamFlow">Ambil Foto (Kamera)</button>
          <button class="btn primary" id="btnUploadFlow">Upload 4 Foto</button>
        </div>

        <!-- FLOW KAMERA -->
        <div id="boothWrap" class="booth hidden" aria-hidden="true">
          <div class="booth-left">
            <video id="cam" playsinline autoplay muted></video>
            <div class="booth-ctrl">
              <button class="btn primary" id="btnStartCam">Nyalakan Kamera</button>
              <button class="btn" id="btnShot" disabled>Ambil Foto (slot aktif)</button>
              <button class="btn" id="btnNext" disabled>Slot Berikutnya âœ</button>
              <button class="btn" id="btnRetry" disabled>Retake Slot Aktif</button>
              <button class="btn" id="btnReset" disabled>Reset</button>
              <button class="btn" id="btnConfirmCam" disabled>Lanjutkan</button>
            </div>
          </div>
          <div class="booth-right">
            <div id="slotGrid" class="thumbs">
              <canvas class="slot" data-i="0" width="240" height="320"></canvas>
              <canvas class="slot" data-i="1" width="240" height="320"></canvas>
              <canvas class="slot" data-i="2" width="240" height="320"></canvas>
              <canvas class="slot" data-i="3" width="240" height="320"></canvas>
            </div>
            <p class="muted">Klik slot untuk memilih yang mau di-retake.</p>
          </div>
        </div>

        <!-- FLOW UPLOAD 4 -->
        <div id="uploadWrap" class="booth hidden" aria-hidden="true">
          <div class="booth-left">
            <input type="file" id="files4" accept="image/*" multiple />
            <div class="booth-ctrl">
              <button class="btn" id="btnClearUpload">Bersihkan Pilihan</button>
              <button class="btn" id="btnConfirmUpload" disabled>Lanjutkan</button>
            </div>
          </div>
          <div class="booth-right">
            <div id="uploadGrid" class="thumbs">
              <canvas class="upslot" data-i="0" width="240" height="320"></canvas>
              <canvas class="upslot" data-i="1" width="240" height="320"></canvas>
              <canvas class="upslot" data-i="2" width="240" height="320"></canvas>
              <canvas class="upslot" data-i="3" width="240" height="320"></canvas>
            </div>
            <p class="muted">Pilih tepat 4 foto. Klik salah satu slot untuk mengganti.</p>
          </div>
        </div>

        <!-- DIALOG KONFIRMASI -->
        <dialog id="confirmDlg">
          <p style="margin:0 0 12px">Sudah yakin dengan pilihan fotonya?</p>
          <form method="dialog">
            <button class="btn">Batal</button>
            <button class="btn primary" value="ok">Ya, lanjut</button>
          </form>
        </dialog>

        <!-- HASIL AKHIR -->
        <div id="resultWrap" class="result hidden">
          <div class="preview" id="framePreview">
            <canvas id="frameCanvas" width="1200" height="2133" aria-label="hasil 4-slot"></canvas>
          </div>
          <div class="booth-ctrl">
            <a class="btn primary" id="btnDownload" download="moment-4frame.png" href="#" style="opacity:.6;pointer-events:none">Download</a>
            <button class="btn" id="btnBackChoose">Kembali ke Pilihan</button>
          </div>
          <p class="muted">Template overlay: <code>assets/overlays/Template-Foto.png</code> (area jendela harus transparan).</p>
        </div>
      </div>
    </section>

    <!-- ====== SURAT (dikembalikan) ====== -->
    <section class="section" id="letter">
      <div class="card">
        <h2>Surat untuk Masa Depan âœ‰ï¸</h2>
        <p>Aku pengin kita baca ini lagi suatu hari nanti.</p>
        <div id="letterBody"></div>
        <button class="btn" id="btnMore">Buka Paragraf Berikutnya âœ</button>
      </div>
    </section>
  </main>

  <footer> Dibuat dengan â¤ï¸ </footer>

  <!-- audio -->
  <audio id="bgm" preload="auto" loop src="assets/audio/penjaga-hati.mp3"></audio>

  <!-- Gate tunggal: tanggal spesial -->
  <div id="gate" style="position:fixed;inset:0;background:#0b1022;display:none;align-items:center;justify-content:center;z-index:9999">
    <div class="card" style="max-width:420px;margin:16px;text-align:center">
      <h2>Hi, ini khusus buat kamu ğŸ’</h2>
      <p class="muted">Masukkan <b>tanggal spesial</b> kita (<i>angka saja</i>).</p>
      <input id="gateInput" inputmode="numeric" pattern="[0-9]*"
             aria-label="Tanggal spesial (angka saja)"
             style="width:100%;background:#0b1220;border:1px solid #334155;border-radius:12px;padding:12px;color:#e5e7eb;margin-top:10px"/>
      <button class="btn primary" id="gateBtn" style="margin-top:12px">Masuk</button>
      <p class="sub" style="margin-top:10px">Hint: format <b>ddmmyy</b> (29â€†08â€†24)</p>
    </div>
  </div>

  <!-- JS eksternal -->
  <script defer src="src/js/main.js"></script>
</body>
</html>